<?include("header.php");include("menu.php");//page content follows?><link href="style.css" rel=StyleSheet type=text/css><script>	function Paginacio(NumPagina)	{		document.getElementById("pagina").value = NumPagina;		Llistat.submit();	}</script><form action="viewlogs.php" method="post" enctype="multipart/form-data" name="Llistat" id="Llistat"><input Id="pagina" name="pagina" type="hidden" ><?try{$db=new PDO("sqlite:/usr/share/local/telestany/telestany.sqlite");$registres = 25;if ( isset($_GET["pagina"])){$Pagina = $_GET["pagina"];} else {if ( isset($_POST["pagina"])){	if ( $_POST["pagina"] != "")	{		$Pagina = $_POST["pagina"];	} else {		$Pagina = 0;	}} else {$Pagina = 0;}}if (!$Pagina ){	$inici = 0;	$Pagina = 1;} else {$inici = ($Pagina -1 ) * $registres;}$res = $db->query("Select count(*) from Log inner join Usuaris on Log.IdUsuari = Usuaris.Id".$query);$total_registre = $res->fetchColumn();$result = $db->query("SELECT Usuaris.Nom,Usuaris.Cognom1,Log.Temps,Log.Quant,Log.Estat,Usuaris.Targeta,Log.Lloc FROM Log inner join Usuaris on Log.IdUsuari = Usuaris.Id order by Log.Temps desc LIMIT ".$inici.",".$registres);$total_pagines = ceil($total_registre / $registres);print PaginacioControl();print "<table class='taulaFormInterior'>";print "<tr><td class='textForm20'>Nom</td><td class='textForm20'>Temps</td><td class='textForm20'>Minuts Restants</td><td class='textForm20'>Lloc</td><td class='textForm20'>Estat</td></tr>";foreach($result as $row)	{	print "<tr><td class='trColor1'>".$row['Nom']." ".$row['Cognom1']."</td>";	print "<td class='trColor1'>".$row['Temps']."</td>";	print "<td class='trColor1'>".$row['Quant']."</td>";	print "<td class='trColor1'>".$row['Lloc']."</td>";	if ( $row['Estat'] == 'ENTRA'){	print "<td class='trColorGreen' style='color:green;'>".$row['Estat']."</td>";	}	if ( $row['Estat'] == 'VIU'){	print "<td class='trColorOrange' style='color:orange;'>".$row['Estat']."</td>";	}	if ( $row['Estat'] == 'SURT'){	print "<td class='trColorRed' style='color:red;'>".$row['Estat']."</td>";	}		print "</tr>";	}	print "</table>";} catch (PDOException $e){   echo $e->getMessage();    echo "<br><br>Database -- NOT -- loaded successfully .. ";    die( "<br><br>Query Closed !!! $error");}?></form><?function PaginacioControl(){	$registres = 25;	$db=new PDO("sqlite:/usr/share/local/telestany/telestany.sqlite");if ( isset($_GET["pagina"])){$Pagina = $_GET["pagina"];} else { if ( isset($_POST["pagina"])){	if ( $_POST["pagina"] != "")	{		$Pagina = $_POST["pagina"];	} else {		$Pagina = 0;	}} else {$Pagina = 0;}}	if (!$Pagina )	{		$inici = 0;		$Pagina = 1;	} else {		$inici = ($Pagina -1 ) * $registres;	}$query = "";	$res = $db->query("Select count(*) from Log inner join Usuaris on Log.IdUsuari = Usuaris.Id ".$query);	//print "Select count(*) from Usuaris ".$query;	$total_registre = $res->fetchColumn();	$total_pagines = ceil($total_registre / $registres);	$html = "<center><table class='taulaFormInteriorPaginacio' ><tr>";	$html .= "<td class='textForm20'><a href='javascript:Paginacio(0)'>|<</a><td>";	if(($Pagina-1) > 0) {		$html .= "<td class='textForm20'>Pàgina <a href='javascript:Paginacio(".($Pagina-5).")'>< ... </a></td>";	}		for ( $i = 1; $i <= $total_pagines; $i++)	{						if ($Pagina == $i) {			$html .= "<td class='textForm21'>Pàgina ".$Pagina."</td>";			} else {			if ( $i < ($Pagina+ 5) & $i > ($Pagina - 5))				$html .= "<td class='textForm20'>Pàgina <a href='javascript:Paginacio(".$i.")'>".$i."</a></td>";			}	}	if(($Pagina + 1)<=$total_pagines) {		$html .= "<td class='textForm20'> <a href='javascript:Paginacio(".($Pagina+5).")'>... ></a></td>";	}	$html .= "<td class='textForm20'><a href='javascript:Paginacio(".$total_pagines.")'>>| </a></td>";	$html .= "</tr></table></center>";	return $html;}?>